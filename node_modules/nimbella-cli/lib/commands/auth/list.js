"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const nimbella_deployer_1=require("nimbella-deployer"),nimbella_deployer_2=require("nimbella-deployer"),chalk_1=require("chalk"),LIST_HEADER="  Namespace            Current Storage   Redis Production Project",NS_LEN=21,YES="   yes  ",NO="    no  ",MAYBE="   -?-  ";class AuthList extends nimbella_deployer_1.NimBaseCommand{async runCommand(e,t,l,a,s){const r=await nimbella_deployer_2.getCredentialDict(nimbella_deployer_2.authPersister);if(1===Object.keys(r).length)await this.formatCredentialList(Object.values(r)[0],s);else for(const e in r){0!==r[e].length&&(s.log(""),s.log(""+chalk_1.bold(`On API host ${e}:`)),await this.formatCredentialList(r[e],s))}}async formatCredentialList(e,t){t.log(chalk_1.bold(LIST_HEADER));for(const l of e){let e=l.namespace,a="";e.length<21?a=" ".repeat(21-e.length):e=e.slice(0,18)+"...";const s=l.current?process&&"win32"===process.platform?"√ ":"✓ ":"  ",r=l.current?YES:NO,i=l.storage?YES:NO,o=l.redis?YES:!1===l.redis?NO:MAYBE,n=l.production?YES:NO,c=l.project||"<any>";t.log(s+e+a+r+i+o+n+"   "+c)}}}exports.default=AuthList,AuthList.description="List all your Nimbella namespaces",AuthList.flags=Object.assign({},nimbella_deployer_1.NimBaseCommand.flags),AuthList.args=[];

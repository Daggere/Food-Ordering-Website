"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const command_1=require("@oclif/command"),ui_1=require("../../ui"),nimbella_deployer_1=require("nimbella-deployer"),nimbella_deployer_2=require("nimbella-deployer"),clients_1=require("../../storage/clients");class ObjectDelete extends nimbella_deployer_1.NimBaseCommand{async runCommand(e,t,a,r,l){const{client:i}=await clients_1.getObjectStorageClient(a,r,nimbella_deployer_2.authPersister);i||l.handleError(`Couldn't get to the object store, ensure it's enabled for the ${a.namespace||"current"} namespace`),await this.deleteFile(a.objectName,i,l).catch(e=>l.handleError("",e))}async deleteFile(e,t,a){const r=await ui_1.spinner();r.start("searching "+e,"deleting",{stdout:!0}),await t.file(e).delete().then(e=>r.stop("done"))}}exports.default=ObjectDelete,ObjectDelete.description="Deletes Object from the Object Store",ObjectDelete.flags=Object.assign({apihost:command_1.flags.string({description:"API host of the namespace to delete object from"})},nimbella_deployer_1.NimBaseCommand.flags),ObjectDelete.args=[{name:"objectName",description:"The object to be deleted",required:!0},{name:"namespace",description:"The namespace to delete object from (current namespace if omitted)",required:!1}];

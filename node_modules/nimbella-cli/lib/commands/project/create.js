"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const command_1=require("@oclif/command"),nimbella_deployer_1=require("nimbella-deployer"),project_1=require("../../generator/project");class ProjectCreate extends nimbella_deployer_1.NimBaseCommand{async runCommand(e,o,r,a,s){if(r.name||a.source||this.doHelp(),nimbella_deployer_1.inBrowser&&s.handleError("'project create' needs local file access. Use the 'nim' CLI on your local machine"),a.source){const e=["-i",a.id||"","-k",a.key||"","-l",a.language];a.overwrite&&e.push("-o"),a.updateSource&&e.push("-u"),a.clientCode&&e.push("-c");const o=this.config.commands.filter(e=>e.pluginName.endsWith(a.source));if(o.length){const r=o.filter(e=>e.id===ProjectCreate.plugins[a.source]);await r[0].load().run([...e])}else s.handleError(`the ${a.source} plugin is not installed. try 'nim plugins add ${a.source}'`)}else await project_1.createOrUpdateProject(!1,r,a,s)}}exports.default=ProjectCreate,ProjectCreate.description="Create a Nimbella Project",ProjectCreate.plugins={postman:"ppm",openapi:"poa"},ProjectCreate.flags=Object.assign({config:command_1.flags.boolean({description:"Generate template config file"}),source:command_1.flags.string({char:"s",description:"API specs source",options:Object.keys(ProjectCreate.plugins)}),id:command_1.flags.string({char:"i",description:"API specs id/name/path"}),key:command_1.flags.string({char:"k",dependsOn:["source"],description:"Key to access the source API"}),language:command_1.flags.string({char:"l",description:"Language for the project (creates sample project unless source is specified)",default:"js",options:["go","js","ts","py","java","swift","php"]}),overwrite:command_1.flags.boolean({char:"o",description:"Overwrites the existing file(s)"}),updateSource:command_1.flags.boolean({char:"u",description:"Sync updated API specs back to source"}),clientCode:command_1.flags.boolean({char:"c",description:"Generates client code",default:!0})},nimbella_deployer_1.NimBaseCommand.flags),ProjectCreate.args=[{name:"name",description:"Project name",required:!1}];

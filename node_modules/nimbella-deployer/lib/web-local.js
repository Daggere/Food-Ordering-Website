"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deployToWebLocal=exports.ensureWebLocal=void 0;const util_1=require("./util"),fs=require("fs"),path=require("path");function ensureWebLocal(e){if(fs.existsSync(e)){if(fs.lstatSync(e).isDirectory())return e;throw new Error(`'${e}' exists and is not a directory`)}return fs.mkdirSync(e,{recursive:!0}),e}function deployToWebLocal(e,r,s){let t=e.simpleName;if(s&&s.strip){let e=t.split(path.sep);e.length>s.strip&&(e=e.slice(s.strip),t=e.join(path.sep))}t=s&&s.prefixPath?path.join(s.prefixPath,t):t,t=path.resolve(r,t);const o=path.dirname(t);fs.existsSync(o)||fs.mkdirSync(o,{recursive:!0});try{fs.copyFileSync(e.filePath,t);const r=util_1.wrapSuccess(t,"web",!1,void 0,{},void 0);return Promise.resolve(r)}catch(r){return Promise.resolve(util_1.wrapError(r,`web resource '${e.simpleName}'`))}}exports.ensureWebLocal=ensureWebLocal,exports.deployToWebLocal=deployToWebLocal;
